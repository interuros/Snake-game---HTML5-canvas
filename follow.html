<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />


    <style>
        
        *{
            margin: 0;
            padding: 0;
        }

        body{
            display: flex;
            height: 100vh;
            align-items: center;
            justify-content: center;
        }

        canvas{
            border: 1px solid red;
        }

    </style>
    
</head>
<body>
    

    <canvas width="500" height="500">

    </canvas>


    <script type="text/javascript">

        let canvas = document.querySelector('canvas');
        let ctx = canvas.getContext('2d');
        let arrowPressed = null;
        

        //SNALE PART OBJECT
        function Square(x, y, size, v, id, color){
            this.x = x;
            this.y = y;
            this.size = size;
            this.v = v;
            this.id = id;
            this.oldX = x;
            this.oldY = y;
            this.color = color;

            this.draw = function(){
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, this.size, this.size );
            }

            this.move = function(){

                //MOVES ONLY 1ST SNAKE PART BEACUSE THE REST WILL JUST FOLLOW THE PREVIOUS PART
                if(this.id === 1){
                    if(arrowPressed === "right"){//arrow RIGHT
                        this.x += this.v;
                        this.y += 0;
                    } else if(arrowPressed === "up"){ //arrow UP
                        this.x += 0;
                        this.y -= this.v;
                    } else if(arrowPressed === "down"){ //arrow DOWN
                        this.x += 0;
                        this.y += this.v;
                    } else if(arrowPressed === "left"){ //arrow LEFT
                        this.x -= this.v;
                        this.y += 0;
                    }
                }
            }
        }

        
        let firstSquare = new Square(300, 200, 9, 10, 1, "#ff0000");//CREATES FIRST SQUARE
        let squareArr = [];

        squareArr.push(firstSquare);

        
        let id = 2;
        if(squareArr.length > 0){
            for (let i = 1; i < 20; i++) {
                let x = squareArr[i - 1].x - squareArr[i - 1].size - 1;
                let y = squareArr[i - 1].y;
                let size = 9;
                let v = 10;
                let color = "#00ff00";
                
                let square = new Square(x, y, size, v, id, color);

                squareArr.push(square);
                id++;
            }
        }
        


        function animate(){

            ctx.clearRect(0,0,canvas.width,canvas.height);

            for (let i = 0; i < squareArr.length; i++) {
                squareArr[i].draw();
                squareArr[i].move();

                if(i > 0 && arrowPressed != null){

                    squareArr[i].x = squareArr[i - 1].oldX;
                    squareArr[i].y = squareArr[i - 1].oldY;
                    
                    squareArr[i - 1].oldX = squareArr[i - 1].x;
                    squareArr[i - 1].oldY = squareArr[i - 1].y;

                }
            }
        }

       function playGame(){setInterval(animate, 41.666667)};

       playGame();

        
        //updates the arrowPressed function depending on the pressed arrow
        window.addEventListener('keydown', function(event){
            event.preventDefault();

            if(event.code === "ArrowRight" && arrowPressed != "left"){//arrow RIGHT
                arrowPressed = "right";
                console.log(arrowPressed);
                
            } else if(event.code === "ArrowUp" && arrowPressed != "down"){ //arrow UP
                arrowPressed = "up";
                console.log(arrowPressed);
            } else if(event.code === "ArrowDown" && arrowPressed != "up"){ //arrow DOWN
                arrowPressed = "down";
                console.log(arrowPressed);
            } else if(event.code === "ArrowLeft" && arrowPressed != "right"){ //arrow LEFT
                arrowPressed = "left";
                console.log(arrowPressed);
            }
            
        });



    </script>
</body>
</html>